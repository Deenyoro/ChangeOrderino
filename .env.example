# ==========================================
# ChangeOrderino Environment Configuration
# ==========================================

# ============ GENERAL ============
COMPOSE_PROJECT_NAME=changeorderino
TZ=America/New_York
ENVIRONMENT=development
DOMAIN=localhost

# ============ DATABASE ============
POSTGRES_USER=changeorderino
POSTGRES_PASSWORD=changeme_strong_password
POSTGRES_DB=changeorderino
POSTGRES_KEYCLOAK_DB=keycloak

DATABASE_URL=postgresql+asyncpg://changeorderino:changeme_strong_password@db:5432/changeorderino
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=0

# ============ REDIS ============
REDIS_URL=redis://redis:6379/0

# ============ MINIO (S3 Storage) ============
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=changeme_minio_password
MINIO_BUCKET_NAME=changeorders
MINIO_SECURE=false
MINIO_SERVER_URL=http://minio:9000
MINIO_EXTERNAL_URL=http://localhost:9000

# ============ API ============
API_HOST=0.0.0.0
API_PORT=8000
VITE_API_URL=/api
CORS_ORIGINS=http://localhost:3000,http://localhost:3443,https://localhost:3443

# ============ SECURITY ============
JWT_SECRET=changeme_jwt_secret_key_min_32_chars
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60
MAX_UPLOAD_SIZE=10485760

# ============ KEYCLOAK ============
AUTH_ENABLED=true
VITE_AUTH_ENABLED=true

KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=changeme_keycloak_admin_password

KEYCLOAK_REALM=changeorderino
KEYCLOAK_CLIENT_ID=changeorderino-app
KEYCLOAK_CLIENT_SECRET=changeme_keycloak_client_secret

# Backend uses internal Docker hostname
KEYCLOAK_SERVER_URL=http://keycloak:8080
KEYCLOAK_REALM_URL=http://keycloak:8080/realms/changeorderino

# Frontend uses public domain (must be browser-accessible)
VITE_KEYCLOAK_URL=https://localhost:8443
VITE_KEYCLOAK_REALM=changeorderino
VITE_KEYCLOAK_CLIENT_ID=changeorderino-app

# ============ EMAIL (Office 365 SMTP) ============
SMTP_ENABLED=true
SMTP_HOST=smtp.office365.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USERNAME=changeorder@treconstruction.net
SMTP_PASSWORD=changeme_email_password
SMTP_FROM_EMAIL=changeorder@treconstruction.net
SMTP_FROM_NAME=TRE Construction Change Orders

# ============ COMPANY INFO ============
COMPANY_NAME=TRE Construction
COMPANY_EMAIL=changeorder@treconstruction.net
COMPANY_PHONE=555-123-4567

# ============ CHANGE ORDER SETTINGS ============
# Default OH&P percentages (can be overridden per job)
DEFAULT_MATERIAL_OHP=15
DEFAULT_LABOR_OHP=20
DEFAULT_EQUIPMENT_OHP=10
DEFAULT_SUBCONTRACTOR_OHP=5

# Labor rates ($ per hour)
RATE_PROJECT_MANAGER=91
RATE_SUPERINTENDENT=82
RATE_CARPENTER=75
RATE_LABORER=57

# Reminder settings
REMINDER_ENABLED=true
REMINDER_INTERVAL_DAYS=7
REMINDER_MAX_RETRIES=4

# Token expiration for GC approval links (hours)
APPROVAL_TOKEN_EXPIRATION_HOURS=168

# ============ CLOUDFLARE TUNNEL (Optional) ============
# CLOUDFLARE_TUNNEL_TOKEN=your_tunnel_token_here
